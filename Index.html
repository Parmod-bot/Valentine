<!DOCTYPE html>
<html>
<head>
<title>Valentine</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#ff7eb3;
  font-family:Arial;
}
.box {
  background:white;
  padding:40px;
  border-radius:20px;
  text-align:center;
  position:relative;
}
button {
  padding:12px 22px;
  margin:10px;
  font-size:18px;
  border-radius:10px;
  border:none;
  cursor:pointer;
}
#yesBtn { background:#ff4d6d; color:white; }
#noBtn { position:absolute; background:#ddd; }
</style>
</head>

<body>

<div class="box" id="box">
<h2>Will you be my Valentine? ‚ù§Ô∏è</h2>
<button id="yesBtn">Yes üíñ</button>
<button id="noBtn">No üò¢</button>
</div>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDW7HktGGlyKMyTffLDIHOB7iBOH27bFZM",
    authDomain: "anything-a4f15.firebaseapp.com",
    projectId: "anything-a4f15",
    storageBucket: "anything-a4f15.firebasestorage.app",
    messagingSenderId: "574497412187",
    appId: "1:574497412187:web:9cc1097c44801dafa71b7e",
    measurementId: "G-2J9M9DC9S3"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

async function logEvent(type) {
  await addDoc(collection(db, "events"), {
    type: type,
    time: serverTimestamp(),
    ua: navigator.userAgent
  });
}

logEvent("page_opened");

const noBtn = document.getElementById("noBtn");
const box = document.getElementById("box");

function moveNo() {
  const w = box.offsetWidth - 100;
  const h = box.offsetHeight - 60;
  noBtn.style.left = Math.random()*w + "px";
  noBtn.style.top = Math.random()*h + "px";
}

noBtn.addEventListener("mouseenter", () => {
  logEvent("no_hovered");
  moveNo();
});

noBtn.addEventListener("click", () => {
  logEvent("no_clicked");
  moveNo();
});

document.getElementById("yesBtn").onclick = () => {
  logEvent("yes_clicked");
  document.body.innerHTML =
    "<h1 style='text-align:center'>You made me the happiest üíû</h1>";
};

</script>

</body>
</html>
